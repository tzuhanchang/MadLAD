{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Index","text":"<p>MadLAD is a event generation wrapper built upon MadGraph5<sup>1</sup>, Pythia8<sup>2</sup>, LHAPDF<sup>3</sup>, FastJet<sup>4</sup> and Delphes<sup>5</sup>. MadLAD is designed to be used with Docker or Singularity containers, which contain all necessary software and environment setups.</p> <p>Contributions to this project are warmly welcomed. If you are interested in contributing, please submit a pull request with your implemented new features or fixed bugs.</p> <ul> <li>Quick Start</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#build-your-own-containers","title":"Build your own containers","text":"<p><pre><code>python -m madlad.build -c examples/config_build.yaml\n</code></pre> Container building require either Docker or Singularity is installed on your system. Specifying software version you need in the build configuration file <code>config_build.yaml</code>.</p>"},{"location":"#generate","title":"Generate","text":"<p>If you want to generate events with one of our provided processes, run <pre><code>python -m madlad.generate --config-name=ttbar-allhad.yaml\n</code></pre> This will only produce a production directory, if you want to automatically launch the Matrix Element (ME) or Parton Shower (PS) simulation, use the option <code>run.auto-launch=True</code>. You can also define your own processes and save them to <code>processes</code> directory.</p>"},{"location":"#reference","title":"Reference","text":"<ol> <li>Alwall, Johan, et al. \"The automated computation of tree-level and next-to-leading order differential cross sections, and their matching to parton shower simulations.\" Journal of High Energy Physics 2014.7 (2014): 1-157. </li> <li>Sj\u00f6strand, Torbj\u00f6rn, et al. \"An introduction to PYTHIA 8.2.\" Computer physics communications 191 (2015): 159-177. </li> <li>Buckley, Andy, et al. \"LHAPDF6: parton density access in the LHC precision era.\" The European Physical Journal C 75 (2015): 1-20. </li> <li>Cacciari, Matteo, Gavin P. Salam, and Gregory Soyez. \"FastJet user manual: (for version 3.0. 2).\" The European Physical Journal C 72 (2012): 1-54. </li> <li>De Favereau, J., et al. \"DELPHES 3: a modular framework for fast simulation of a generic collider experiment.\" Journal of High Energy Physics 2014.2 (2014): 1-26.</li> </ol>"},{"location":"CHANGELOG/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"CHANGELOG/#unreleased","title":"[Unreleased]","text":""},{"location":"CHANGELOG/#added","title":"Added","text":"<ul> <li>Add Shower Controls (#61)</li> </ul>"},{"location":"CHANGELOG/#changed","title":"Changed","text":"<ul> <li>Use GitHub Page for documentation hosting (#72)</li> <li>Use MkDocs Material for documentation (#71)</li> </ul>"},{"location":"CHANGELOG/#removed","title":"Removed","text":""},{"location":"CHANGELOG/#fixed","title":"Fixed","text":"<ul> <li>Fix Singularity build with an external MG5 directory (#70)</li> </ul>"},{"location":"CHANGELOG/#v310-2025-05-28","title":"v3.1.0 - 2025-05-28","text":""},{"location":"CHANGELOG/#added_1","title":"Added","text":"<ul> <li>Add LICENCE (#66)</li> <li>Add options to overwrite MG5 configuration (#65)</li> </ul>"},{"location":"CHANGELOG/#changed_1","title":"Changed","text":"<ul> <li>Change MadLAD base image to Ubuntu:20.04 (#63)</li> </ul>"},{"location":"CHANGELOG/#fixed_1","title":"Fixed","text":"<ul> <li>Fix missing line break while passing <code>gen.run_settings</code> (#68)</li> <li>Fix scale writer for newer MG5 versions (#67)</li> <li>Fix LO shower (#59)</li> <li>Fix Singularity build with a local mg5 installation (#56)</li> </ul>"},{"location":"CHANGELOG/#v301-2024-07-08","title":"v3.0.1 - 2024-07-08","text":""},{"location":"CHANGELOG/#added_2","title":"Added","text":"<ul> <li>Implement parton shower for LO events (#52)</li> <li>Add automatic Delphes execution (#49)</li> <li>Add SM 4top process (#42)</li> <li>Add <code>Processes</code> documentation (#36)</li> <li>Add <code>HTCondor</code> documentation (#35)</li> <li>Add <code>order</code> option (#34)</li> <li>Implement <code>post</code> (#33)</li> <li>Add readthedocs support (#22)</li> </ul>"},{"location":"CHANGELOG/#changed_2","title":"Changed","text":"<ul> <li>Change <code>no-shower</code> to <code>shower</code> (#45)</li> <li>Use <code>subprocess.run</code> (#27)</li> <li>Update <code>docs</code> following #23 (#26)</li> <li>Update <code>madlad/__init__.py</code> (#24)</li> <li>Use <code>Hydra</code> framework (#23)</li> </ul>"},{"location":"CHANGELOG/#fixed_2","title":"Fixed","text":"<ul> <li>Fix PDF and model download for <code>Docker</code> (#54)</li> <li>Fix <code>gunzip</code> path (#51)</li> <li>Fix <code>FileNotFoundError</code> (#50)</li> <li>Fix <code>.sif</code> image finding (#47)</li> <li>Fix MG5 build bug when use singularity (#41)</li> <li>Fix missing indentation (#40)</li> <li>Fix <code>order</code> query  (#39)</li> <li>Fix error occurred when <code>docker</code> and <code>singularity</code> both exist (#38)</li> <li>Fix <code>singularity</code> build issue (#32)</li> <li>Fix <code>singularity</code> build issue (#30)</li> </ul>"},{"location":"CHANGELOG/#v300-2024-03-13","title":"v3.0.0 - 2024-03-13","text":""},{"location":"CHANGELOG/#added_3","title":"Added","text":"<ul> <li>Add auto <code>singularity</code> build functionality (#19)</li> <li>Add <code>CODEOWNERS</code> file (#18)</li> <li>Add auto container building functionality (#15)</li> </ul>"},{"location":"CHANGELOG/#changed_3","title":"Changed","text":"<ul> <li>Update <code>README.md</code> (#21)</li> <li>Relocate generate commands (#17)</li> <li>Move <code>container.py</code> to <code>madlad.container</code> (#16)</li> </ul>"},{"location":"LICENCE/","title":"Licence","text":"<p>MIT License</p> <p>Copyright \u00a9 2025 Zihan Zhang</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"contributors/","title":"Contributors","text":"<p>Zihan Zhang</p> <p>University of Manchester</p> <p>zihan.zhang@manchester.ac.uk</p> <p>Dr. Patrick Dougan</p> <p>Southern Methodist University</p> <p>patrick.dougan@cern.ch</p> <p>Dr. Ethan Simpson</p> <p>University of Manchester</p> <p>ethan.simpson@manchester.ac.uk</p>"},{"location":"source/installation/","title":"Installation","text":"<p>Get the latest MadLAD release: <pre><code>git clone https://github.com/tzuhanchang/MadLAD.git\n</code></pre></p> <p>MadLAD requires the following dependencies:</p> <ul> <li>Python 3.10+</li> <li>hydra</li> <li>Docker or Singularity</li> </ul>"},{"location":"source/advanced/htcondor/","title":"MadLAD + HTCondor","text":"<p>Warning</p> <p>Running MadLAD on HTCondor requires <code>singularity</code>.</p> <p>To start, you need to build a <code>singularity</code> image containing model and PDF set required for the run following this tutorial. You also need a submit description file (<code>submit.sub</code>) and an executable (<code>job_condor.sh</code>). Submitting job to HTCondor, run:</p> <pre><code>condor_submit submit.sub\n</code></pre> <p>Where <code>submit.sub</code> instructs HTCondor how to run the job, learn more. The following is a simple submit description file: <pre><code>executable              = job_condor.sh\nRequirements            = HasSingularity\narguments               = $(ClusterId)$(ProcId)\noutput                  = $(ClusterId).$(ProcId).out\nerror                   = $(ClusterId).$(ProcId).err\nlog                     = $(ClusterId).log\nenvironment             = \"ClusterId=$(ClusterId) ProcId=$(ProcId)\"\nshould_transfer_files   = YES\ntransfer_input_files    = MadLAD, job_condor.sh\nwhen_to_transfer_output = ON_EXIT\ntransfer_output_files   = MadLAD/Output\nrequest_CPUs = 8\nqueue 100\n</code></pre> We set <code>Requirements = HasSingularity</code>, which only requests nodes that have <code>singularity</code> installed. The HTCondor job is initiated by transferring <code>MadLAD</code> folder and run script <code>job_condor.sh</code> to the node, defined in <code>transfer_input_files</code>. On exit, <code>MadLAD/Output</code> is transferred out the node, defined in <code>transfer_output_files</code> (this should be set to the path corresponding to the <code>save_dir</code> in your process configuration file).</p> <p>The executable, <code>job_condor.sh</code>, includes Python environment activation and MadLAD generation commands: <pre><code>#!/bin/bash\n\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\n# ...\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\n# conda activate madlad\n\ncd MadLAD   # Execute in MadLAD folder\n\npython -m madlad.generate --config-name=ttbar-allhad.yaml [options]\n\ncd -        # Return to condor work directory\n</code></pre></p>"},{"location":"source/processes/available_processes/","title":"Available Processes","text":"<p>Here is a list of built-in MC processes. Contributions are warmly welcomed, to start, submitting an issue here or a pull request here</p>"},{"location":"source/processes/available_processes/#tops","title":"Tops","text":"<ul> <li> <p>t\\bar{t}:</p> <ul> <li>All-hadronic (NLO): <code>ttbar-allhad</code>.</li> </ul> </li> <li> <p>t\\bar{t}t\\bar{t}:</p> <ul> <li>Inclusive (NLO): <code>4top</code>.</li> </ul> </li> </ul>"},{"location":"source/processes/available_processes/#higgs","title":"Higgs","text":"<ul> <li>t\\bar{t}H (NLO): <code>ttH_nlo</code>.</li> </ul>"},{"location":"source/tutorials/build_containers/","title":"Build Your Own Containers","text":"<p>Since MadLAD release v3.0, we have introduced auto container building functionality. You can now build a container image with easy.</p> <p>To build a MadLAD image: <pre><code>python -m madlad.build -c examples/config_build.yaml\n</code></pre> This command requires <code>yaml</code>, if it is not available in your python environment, try installing it with <code>pip install yaml</code>.</p> <p><code>examples/config_build.yaml</code> is a build configuration file, it has the following structure: <pre><code>image:\n  name:    \"madlad-custom\"\n\nbuild:\n  mg5:     \"2.9.18\" # MG5 version, (or path to a local installation)\n  pythia:  \"8.301\"\n  lhapdf:  \"6.5.0\"\n  fastjet: \"3.4.0\"\n  delphes: \"3.5.0\"\n\nextra:\n  pdfs:   [260000, 260400, 303400]          # Additional pdf sets\n  models: [\"2HDMtII_NLO\", \"HC_NLO_X0_UFO\"]  # Additional models\n</code></pre></p> <p>The configuration file has three blocks: <code>image</code>, <code>build</code> and <code>extra</code>. Under the <code>image</code> block, you can define the name of the output image. You can state your preferred software version in the <code>build</code> block. In the <code>extra</code> block, you can provide PDFs and models you wish to include in the image.</p> <p>For MadGraph, if you have a local installation and want to use it in the container, you can specify the path to a local installation in <code>build</code>. In this way, MadLAD will not attempt to download MadGraph, but instead copying your local installation into the image.</p>"},{"location":"source/tutorials/generate_events/","title":"Generate Events","text":"<p>Generate events with MadLAD is simple, all you need are:</p> <ul> <li>A pre-built MadLAD image (see here)</li> <li>A configuration file</li> </ul> <p>To generate events, run <pre><code>python -m madlad.generate --config-name=ttbar-allhad.yaml [options]\n</code></pre> MadLAD uses hydra for configuring run (#23). You can overwrite any option using, for example <code>run.auto-launch=True</code> at the end, it overwrites the <code>auto-launch</code> option provided in your configuration file.</p> <p>Note</p> <p>Any custom configuration file must be place in <code>processes</code> folder.</p> <p>A configuration file contains necessary information for the generation, such as the model, physics process and center-of-mass energy, etc. In this tutorial, we will use ttbar events with all-hadronic final states as an example, whose configuration file can be found in <code>processes/ttbar-allhad.yaml</code>.</p> <pre><code>run:\n  image:       \"madlad-custom\"\n  mg5:         \"/app/MG5_aMC/bin/mg5_aMC\"\n  launch-from: null\n  auto-launch: False\n  no-shower:   False\n\ngen:\n  block_model:\n    model:          loop_sm-no_b_mass\n    multiparticle:  [\"p = g u c d s u~ c~ d~ s~ b b~\", \"j = g u c d s u~ c~ d~ s~ b b~\"]\n    proc:           \"p p &gt; t t~ [QCD]\"\n    save_dir:       \"Output\"\n\n  block_run:\n    nevents:        1000\n    nevt_job:       1000\n    iseed:          0\n    beamenergy:     6500\n    pdlabel:        \"lhapdf\"\n    lhaid:          260000\n    parton_shower:  \"PYTHIA8\"\n    maxjetflavor:   5\n    reweight_scale: \".true.\"\n    reweight_PDF:   \".true.\"\n    PDF_set_min:    260001\n    PDF_set_max:    260100\n    muR_over_ref:   1.0\n    muF1_over_ref:  1.0\n    muF2_over_ref:  1.0\n    dynamical_scale_choice: 10\n    jetalgo:        -1\n    jetradius:      0.4\n    ptj:            0.1\n    req_acc:        0.001\n\n  block_madspin:\n    multiparticle:  [\"p = g u c d s u~ c~ d~ s~ b b~\", \"j = g u c d s u~ c~ d~ s~ b b~\"]\n    decays:         [\"t &gt; w+ b, w+ &gt; j j\", \"t~ &gt; w- b~, w- &gt; j j\"]\n    bwcut:          15\n    max_weight_ps_point: 500\n    Nevents_for_max_weight: 500\n\n  block_param:\n    param: \"aMcAtNlo_param_card_loop_sm-no_b_mass.dat\"\n\n  block_sf:\n    custom_scales: [\n        \"c         Q^2= mt^2 + 0.5*(pt^2+ptbar^2)\",\n        \"          xm2=dot(pp(0,3),pp(0,3))\",\n        \"          tmp=sqrt(xm2+0.5*(pt(pp(0,3))**2+pt(pp(0,4))**2))\",\n        \"          temp_scale_id='mt**2 + 0.5*(pt**2+ptbar**2)'\",\n        \"              \"\n    ]\n\npost: [\n  \"echo 'Finished'\"\n]\n</code></pre> <p>In this configuration file, there are three sections: <code>run</code>, <code>gen</code> and <code>post</code>. Configures in <code>run</code> controls how MadLAD launch MadGraph. <code>gen</code> contains various control blocks: <code>block_model</code>, <code>block_run</code>, <code>block_madspin</code>, <code>block_param</code> and <code>block_sf</code>, they are used to overwrite correponding options in different MadGraph's <code>Cards</code>. Finally, <code>post</code> is a list of <code>bash</code> commands that tells what MadLAD should execute after event generation, such as running Delphes detector simulation.</p>"}]}